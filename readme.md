# 项目背景
尚庭公寓是一个公寓租赁平台项目，包含**移动端**和**后台管理系统**，其中移动端面向广大用户，提供找房、看房预约、租约管理等功能，后台管理系统面向管理员，提供公寓（房源）管理、租赁管理、用户管理等功能。

## 移动端
### 体验地址

移动端的线上体验地址为：http://43.142.63.186:80/

移动端登录需要阿里云短信api，该api需要收费，所以提供直接登录的账号便于体验。

`用户名 15722922862 验证码 123456`  注：网站被攻击，暂时不可用。

### 功能模块

各功能模块具体内容如下

- **房源检索**

  用户可以使用这个功能来搜索和检索符合其需求的房源。他们可以根据不同的条件，如地理位置、租金范围、支付方式等，快速找到适合的房源。

- **看房预约管理**

  用户可以通过这个功能预约看房。他们可以选择合适的时间，预约在特定的公寓进行实地看房，以便更好地了解房源的情况和环境。

- **租约管理**

  这个功能允许用户查看和管理他们的租约信息。他们可以在移动端查看租约合同，以及提交租约终止或延长的请求。

- **房源浏览历史**

  用户可以在这里查看他们曾经浏览过的房源历史记录。这个功能可以帮助用户追踪之前感兴趣的房源，方便他们重新查看或做出决策。

### 功能展示

![image-20240929105610012](https://typora-1256823886.cos.ap-nanjing.myqcloud.com/2023/image-20240929105610012.png)

采用手机端打开网页，显示效果更佳。网站被攻击，暂时用上图展示效果。

## 后台管理系统
### 体验地址

后台管理系统的线上体验地址为：http://43.142.63.186:81/

`账号 chenchaofeng 密码 123456`

### 功能模块

各功能模块具体内容如下

- **公寓信息管理**

  这个模块负责管理所有公寓的基本信息，包括公寓名称、地址、联系方式等。管理员可以在这里添加、编辑、删除公寓信息。

- **房间信息管理**

  该模块负责管理每个公寓内各个房间的详细信息，包括房间号、户型、面积、租金等。管理员可以在这里进行房间信息的添加、编辑和删除。

- **公寓/房间属性管理**

  这个模块允许管理员定义公寓和房间的各种属性，比如公寓和房间的配套设施，方便管理员在维护公寓信息和房间信息时进行选择。

- **看房预约管理**

  该模块用于管理用户的看房预约请求。用户可以在移动端提交看房预约，管理员可以在后台管理系统中查看和处理这些请求，以方便安排人员接待用户。

- **租约管理**

  这个模块用于管理租约的创建、修改和终止。管理员可以在这里生成租约合同，并发送给用户签约。

- **后台系统用户管理**

  该模块用于管理后台系统的用户账户信息，管理员可以创建、编辑、删除、禁用账户信息。

- **移动端用户管理**

  这个模块负责管理移动端用户的信息。管理员可以查看用户信息，处理账户相关问题。

### 功能展示

#### 登录页面

![image-20240929105008859](https://typora-1256823886.cos.ap-nanjing.myqcloud.com/2023/image-20240929105008859.png)

![image-20240929105105121](https://typora-1256823886.cos.ap-nanjing.myqcloud.com/2023/image-20240929105105121.png)

#### 系统管理（部分）

![image-20240929105202490](https://typora-1256823886.cos.ap-nanjing.myqcloud.com/2023/image-20240929105202490.png)

#### 公寓管理（部分）

![image-20240929105252290](https://typora-1256823886.cos.ap-nanjing.myqcloud.com/2023/image-20240929105252290.png)

租赁管理（部分）

![image-20240929105330655](https://typora-1256823886.cos.ap-nanjing.myqcloud.com/2023/image-20240929105330655.png)

#### 用户管理

![image-20240929105356648](https://typora-1256823886.cos.ap-nanjing.myqcloud.com/2023/image-20240929105356648.png)

# 源码结构
```
lease
├── common（公共模块——工具类、公用配置等）
│   ├── pom.xml
│   └── src
├── model（数据模型——与数据库相对应地实体类）
│   ├── pom.xml
│   └── src
├── web（Web模块）
│   ├── pom.xml
│   ├── web-admin（后台管理系统Web模块——包含mapper、service、controller）
│   │   ├── pom.xml
│   │   └── src
│   └── web-app（移动端Web模块——包含mapper、service、controller）
│       ├── pom.xml
│       └── src
└── pom.xml
```



# 部署相关

该项目主要涉及到的基础设施为mysql、reids、minio、nginx等，涉及到的服务有阿里云短信服务等。该项目部署到腾讯云主机，能够稳定运行。

- 主机配置：
  - 系统 - CentOS 7.6 64bit
  - CPU - 2核 
  - 内存 - 2GB
  - 系统盘 - 50GB
  - 带宽 - 4Mbps

- 部署文档：
  - 基础设施安装：xxx 待续
  - 前后端部署：xxx 待续




# 参考资料

所有资料：
- 链接：https://pan.baidu.com/s/18gU7FbbHdv9vRLnPIywl2g?pwd=yyds 
- 提取码：yyds

成品源码：

- [chaofengdev/shangting-lease: 尚庭公寓完整源码 (github.com)](https://github.com/chaofengdev/shangting-lease)



# 您可能遇到的问题

### 功能相关

- 公寓图片和房间图片，无法正常显示
  - 原因：初始数据库中，apartment_info表、room_info表的图片均需关联到graph_info表，graph_info表的url字段保存的是minio的图片地址，非公网地址。
  - 解决：在后台管理系统web-admin中，按照业务流程添加公寓图片和房间图片即可。
- 新增或修改公寓信息时，无法正常更新公寓的所在地址
  - 原因：前端显示的是地址的省、市、区名称，而新增或修改公寓信息保存的是地址的省、市、区id，名称没有保存。
  - 解决：可以在前端增加保存地址名称的逻辑，也可以在后端根据地址id找到名称，更新vo对象后保存。

### 开发相关

- common模块`@MapperScan("com.atguigu.lease.web.*.mapper")` 爆红，同时web模块下的mapper注入均爆红
  - 原因：idea显示问题，因为在common模块下没有依赖web模块，所以去扫描web模块下的mapper，不能正确扫描到。
  - 解决：纯idea显示问题，不影响打包部署。也可以将该注解分别加入到`web-admin` 和`web-app` 的启动类上，可解决爆红问题。

### 部署相关

- 部署到腾讯云主机始终无法正确访问服务
  - 检查云主机端口是否开放，需要开放对应端口，如80、81、8080、8081等；
  - 检查nginx服务是否正常启动，配置文件是否书写正确；
  - 检查后端服务是否正确启动，可以使用xxx/doc.html测试接口是否正常工作来确定；
  - 等等
- 加载页面非常慢
  - 检查mysql是否正常工作，可以使用本地客户端软件；
  - 检查是否启用了科学上网工具，部分节点限制了速度；



# 后续工作

- [ ] 部署文档完善
- [ ] 简历书写



# 其他

- 参考文档里存在少量错误代码，常见于少量sql语句和少量service层代码，直接复制粘贴后，请务必测试主要功能点；
- 本仓库代码修复了文档里的错误，可以直接使用，使用前请配置`web-admin` 和`web-app`模块下的`application.yml` ；
- 如果对您有帮助，给个star，谢谢~~



# 讨论群

QQ群：916083097

微信群：暂无
